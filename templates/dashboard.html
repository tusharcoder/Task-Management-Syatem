{%extends 'base.html'%}
{%block content%}

<style>
.dropbtn {
    background-color: black;
    color: white;
    padding: 14.8px;
    font-size: 14.8x;
    border: none;
    cursor: pointer;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 150px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 14px;
    text-decoration: none;
    display: block;
}

.dropdown-content a:hover {background-color: #f1f1f1}

.dropdown:hover .dropdown-content {
    display: block;
}

.dropdown:hover .dropbtn {
    background-color: black;
}

.dropdown-submenu {
    position: relative;
}

.dropdown-submenu .dropdown-menu {
    top: 0;
    left: 100%;
    margin-top: -1px;
}
</style>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">ScaleDesk</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="/">Home</a></li>
      <li><a href="/about/">About</a></li>
      <li><a href="/task/">Tasks</a></li>
      <li><a href="/viewtasks/">View Tasks</a></li>
      <li><a href="/profile">Profile</a></li>
      <div class="dropdown">
        <button class="dropbtn">DashBoard</button>
        <div class="dropdown-content">
        <a data-toggle="pill" href="#menu1">Daily tasks of all user</a>
        <a data-toggle="pill" href="#menu2">List of Users</a>
        <a data-toggle="pill" href="#menu3">Tasks pending for approval</a>
        <a data-toggle="pill" href="#menu6">Toal Project Hours</a>
      </div>
    </div>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="#"><span class="glyphicon glyphicon-user"></span>{{user}}</a></li>
      <li><a href="{% url 'logout' %}"><span class="glyphicon glyphicon-log-out"></span> Log Out</a></li>
    </ul>
  </div>
</nav>


<div class="tab-content">
  <h2>Your <small>DashBoard</small></h2>
  <div id="menu1" class="tab-pane fade">
    <h3>Task Details of all users</h3>
    <div class="container">
      <table id="example7" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Project</th>
                    <th>WorkType</th>
                    <th>Assigned By</th>
                    <th>Created At</th>
                </tr>
            </thead>
          {% for task in tasks%}
              <tbody>
                  <tr>
                      <td>{{task.user}}</td>
                      <td>{{task.name}}</td>
                      <td>{{task.description}}</td>
                      <td>{{task.starttime}}</td>
                      <td>{{task.endtime}}</td>
                      <td>{{task.project}}</td>
                      <td>{{task.worktype}}</td>
                      <td>{{task.assigned_by}}</td>
                      <td>{{task.created_at}}</td>
                    </tr>
                {%endfor%}
          </tbody>
        </table>
    </div>
  </div>


  <div id="menu2" class="tab-pane fade">
    <h3>List of Users</h3>
    <div class="container">
      <table id="example1" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Name</th>
                    <th>Employee Id</th>
                    <th>Address</th>
                    <th>Pan Number</th>
                    <th>Position</th>
                </tr>
            </thead>
          {% for mem in member %}
              <tbody>
                  <tr>
                      <td>{{mem.user}}</td>
                      <td>{{mem.name}}</td>
                      <td>{{mem.emp_id}}</td>
                      <td>{{mem.address}}</td>
                      <td>{{mem.pan_no}}</td>
                      <td>{{mem.position}}</td>
                    </tr>
          {% endfor %}
          </tbody>
        </table>
    </div>
  </div>


  <div id="menu3" class="tab-pane fade">
    <h3>Tasks pending for approval</h3>
    <div class="container">
      <table id="example2" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                  <th>User</th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Start Time</th>
                  <th>End Time</th>
                  <th>Project</th>
                  <th>WorkType</th>
                  <th>Assigned By</th>
                  <th>Created At</th>
                </tr>
            </thead>
          {% for taskp in taskpending%}
              <tbody>
                  <tr>
                    <td>{{taskp.user}}</td>
                    <td>{{taskp.name}}</td>
                    <td>{{taskp.description}}</td>
                    <td>{{taskp.starttime}}</td>
                    <td>{{taskp.endtime}}</td>
                    <td>{{taskp.project}}</td>
                    <td>{{taskp.worktype}}</td>
                    <td>{{taskp.assigned_by}}</td>
                    <td>{{taskp.created_at}}</td>
                  </tr>
          {% endfor %}
          </tbody>
        </table>
    </div>
  </div>


  <div id="menu6" class="tab-pane fade">
    <h2>Total Project Hours for each project:</h2>
    <div class="container">
      <table id="example3" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                  <th>Project Name</th>
                  <th>Total Duration</th>
                </tr>
            </thead>
          {% for taskp in data%}
              <tbody>
                  <tr>
                    <td>{{taskp.name}}</td>
                    <td>{{taskp.duration}}</td>
                  </tr>
          {% endfor %}
          </tbody>
        </table>
    </div>

    <!-- <ul>
      {% for pro in data %}
        <li><h3>{{pro.name}} : {{pro.duration}}</h3></li>
      {% endfor %}
    </ul>
  </div> -->
</div>



<script>
$(document).ready(function() {
    $('#example7').DataTable();
} );
</script>

<script>
$(document).ready(function() {
    $('#example1').DataTable();
} );
</script>

<script>
$(document).ready(function() {
    $('#example2').DataTable();
} );
</script>

<script>
$(document).ready(function() {
    $('#example3').DataTable();
} );
</script>


{%endblock%}
